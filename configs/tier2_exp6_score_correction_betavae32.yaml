# Stage 2 - Experiment 6: Score-based manifold correction (β-VAE 32D latents)
#
# Same protocol as tier2_exp6_score_correction.yaml, but points at the 32D
# β-VAE latent store from exp5. Useful for comparing dimensionality effects.

seed: 42

data:
  latents_dir: ./outputs/tier2/exp5_betavae/20260206_174326/baseline_betavae/latents.zarr
  latents_index: ./outputs/tier2/exp5_betavae/20260206_174326/baseline_betavae/latents_index.parquet
  frames_index: ./outputs/tier2/exp5_betavae/20260206_174326/baseline_betavae/phase0_frames.parquet
  splits_dir: ./outputs/phase0/splits
  # Provide a Phase 1 checkpoint via --checkpoint, or set one here.
  phase1_checkpoint: ./outputs/tier2/exp5_betavae/20260206_174326/baseline_betavae/phase1/checkpoints/mdn_k1_final.pt

score_model:
  latent_dim: 32
  hidden_dim: 512
  n_layers: 4
  sigma_min: 0.01
  sigma_max: 1.0
  conditional: false
  output_skip: false

score_train:
  batch_size: 512
  num_workers: 0
  max_steps: 20000
  lr: 1.0e-4
  weight_decay: 1.0e-4
  grad_clip_norm: 1.0
  log_every: 100
  save_every: 5000
  max_frames_per_utt: null

correction_sweep:
  method: [langevin, tweedie]
  n_steps: [1, 3]
  step_size: [0.001, 0.01]
  sigma: [0.05, 0.1, 0.25]
  tweedie_scale: [1.0]

injection:
  window_size: 8
  horizon_k: 1
  k_steps: 16
  n_eval_utterances: 16
  segments_per_utt: 8
  max_frames_per_utterance: 2000

train:
  device: auto

output:
  out_dir: ./outputs/tier2/exp6_score_correction_betavae32

